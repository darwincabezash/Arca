<section class="content">
  <div class="container-fluid">

    <div class="row mt-4">
      <div class="col-12">



        <!-- Custom Tabs -->
        <div class="card">
          <div class="card-header d-flex p-0">
            <h3 class="mt-4 mb-2 pl-4">Catálogo Etapa</h3>

          </div><!-- /.card-header -->
          <div class="card-body">
            <div class="tab-content">
              <div class="tab-pane active" id="tab_1">

                <!-- general form elements -->
                <div class="card card-primary">
                  <div class="card-header">
                    <h3 class="card-title"><span class="text-light">Registra las etapas que vas
                        a usar en el sistema Ej. Niño, Adolecente, Joven, Etc.</span></h3>

                  </div>
                  <!-- /.card-header -->
                  <!-- form start -->

                  <div class="card-body">
                    <form [formGroup]="nuevaEtapaForm" (ngSubmit)="agregarEtapa()">
                      <!--TIPO-->
                      <div class="row">
                        <div class="col-sm-12">
                          <!-- text input -->

                          <div class="row">
                            <div class="col-md-4 col-sm-12">
                              <div class="form-group">
                                <label class="col-form-label">*Etapa</label>

                                <input type="text" class="form-control form-control-lg" id="tipo"
                                  placeholder="Ingresa la etapa" formControlName="tipo">
                              </div>
                            </div>
                            <div class="col-md-4  col-sm-12">
                              <div class="form-group">
                                <label class="col-form-label">*Edad Inicial</label>

                                <input type="number" class="form-control form-control-lg" id="edadI"
                                  placeholder="Ingresa la edad inicial" formControlName="edadI">
                              </div>
                            </div>
                            <div class="col-md-4  col-sm-12">
                              <div class="form-group">
                                <label class="col-form-label">*Edad Final</label>

                                <input type="number" class="form-control form-control-lg" id="edadF"
                                  placeholder="Ingresa la edad final" formControlName="edadF">
                              </div>
                            </div>
                          </div>


                        </div>

                      </div>


                      <button type="submit" class="btn btn-success btn-lg-12 btn-sm-12"
                        [disabled]="nuevaEtapaForm.invalid">Guardar Etapa</button>

                    </form>

                  </div>
                  <!-- /.card-body -->

                </div>
                <!-- /.card -->

              </div>

            </div>
            <!-- /.tab-content -->


            <div class="text-right mt-0 mb-0 pl-4">
              <button type="button" class="btn btn-link" aria-label="Left Align" (click)="refrescarEtapa()"
                style="background-color: transparent;">
                <i class="fas fa-sync-alt .bg-primary fa-2x" style="border-width: 0px;"></i>
              </button>
            </div>

          </div><!-- /.card-body -->
          <div class="row">
            <div class="col-12">
              <!-- Custom Tabs -->
              <div class="card ml-3 mr-3">

                <table id="example" class="table table-striped table-bordered" cellspacing="0" width="100%">

                  <thead>
                    <tr>
                      <th class="text-center">LISTA DE ETAPA </th>
                      <th class="text-center">EDAD INICIAL </th>
                      <th class="text-center">LISTA FINAL </th>
                      <th class="text-center" style="text-align:center;width:100px;">ACCIÓN
                      </th>
                    </tr>
                  </thead>

                  <tbody>

                    <!-- <tr *ngIf="let tp of grupo"> -->

                    <tr *ngFor="let tp of etapa">

                      <td class="align-middle">{{tp.tipo}}</td>
                      <td class="align-middle text-center">{{tp.edadI}}</td>
                      <td class="align-middle text-center">{{tp.edadF}}</td>



                      <td>
                        <!-- Boton Editar-->
                        <button type="button" class="btn-xs align-middle" style="margin:0px;border:none;"
                          (click)="idAEditar(tp._id)" data-toggle="modal" data-target="#modal-editar">
                          <i class="fas fa-user-edit fa-2x " style="color:#18A2B8;"></i>
                        </button>


                        <!-- Boton Eliminar-->
                        <button type="button" class="btn-xs align-middle" style="margin-left:5px;border:none;"
                          (click)="idAEliminar(tp._id)" data-toggle="modal" data-target="#modal-eliminar">

                          <i class="fas fa-trash fa-2x ml-1 mr-1" style="color:#DC3545;"></i>

                        </button>
                      </td>
                    </tr>

                  </tbody>
                </table>


                <!-- Modal Editar 1-->


                <div class="modal fade" id="modal-editar">
                     <form [formGroup]="actualizarEtapaForm" >
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h4 class="modal-title">Editar etapa</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                      <div class="modal-body">


                        <div class="card-body">

                          <!--TIPO-->
                          <div class="row">


                            <div class="form-group col-md-12">
                              <label class="col-form-label">*Etapa</label>

                              <input type="text" class="form-control form-control-lg" id="tipoEditar"
                                placeholder="Ingresa la etapa" formControlName="tipoEditar" value="{{_idEditar?.tipo}}">

                            </div>

                            <div class="form-group col-lg-6">
                              <label class="col-form-label">*Edad Inicial</label>

                              <input type="text" class="form-control form-control-lg" id="edadIEditar"
                                placeholder="Edad inicial" formControlName="edadIEditar" value="{{_idEditar?.edadI}}">

                            </div>

                            <div class="form-group col-lg-6">
                              <label class="col-form-label">*Edad Final</label>

                              <input type="text" class="form-control form-control-lg" id="edadFEditar"
                                placeholder="Edad final" formControlName="edadFEditar" value="{{_idEditar?.edadF}}">

                            </div>


                          </div>

                        </div>
                      </div>
                      <div class="modal-footer justify-content-between">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Salir</button>


                        <button class="btn btn-success btn-lg-12 btn-sm-12" (click)="actualizarEtapa()" data-dismiss="modal">Actualizar
                          Etapa</button>
                      </div>
                    </div>
                    <!-- /.modal-content -->
                  </div>
                  <!-- /.modal-dialog -->
                  </form>
                </div>


                <!-- Modal Eliminar 2-->


                <div class="modal fade" id="modal-eliminar">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h4 class="modal-title">Eliminar etapa</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                      <div class="modal-body">
                        <div class="card-body">

                          <p>La etapa <b> {{_idEliminar?.tipo}}</b> sera eliminada, ¿Desea
                            continuar?</p>
                        </div>

                      </div>
                      <div class="modal-footer justify-content-between">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Salir</button>
                        <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="eliminarEtapa()">Si,
                          Eliminar</button>
                      </div>
                    </div>
                    <!-- /.modal-content -->
                  </div>
                  <!-- /.modal-dialog -->
                </div>


              </div>
            </div>
          </div>


        </div>
        <!-- ./card -->


      </div>
      <!-- /.col -->

    </div>
    <!-- /.row -->


  </div>
</section>
